{
  "/Users/wilianmarroquin/Proyectos/presupuesto/serverless.yml": {
    "versionFramework": "4.24.0",
    "servicePath": "/Users/wilianmarroquin/Proyectos/presupuesto/serverless.yml",
    "serviceConfigFileName": "serverless.yml",
    "service": {
      "service": "laravel-api-budget",
      "provider": {
        "name": "aws",
        "region": "us-east-1",
        "runtime": "provided.al2",
        "stage": "production",
        "memorySize": 1024,
        "environment": {
          "APP_URL": "https://api.mrqn-labs.com",
          "APP_ENV": "local",
          "APP_DEBUG": "true",
          "APP_KEY": "base64:c26n7p7lFdoCgX3D8BKXkRQEI+V3IbwekVtnPUinym8=",
          "DB_CONNECTION": "mysql",
          "DB_HOST": "gateway01.us-east-1.prod.aws.tidbcloud.com",
          "DB_PORT": "4000",
          "DB_DATABASE": "expense_control",
          "DB_USERNAME": "2JtT8tak5dQKC9U.root",
          "DB_PASSWORD": "<REDACTED>",
          "SESSION_DRIVER": "cookie",
          "CACHE_DRIVER": "array",
          "SESSION_DOMAIN": ".mrqn-labs.com",
          "FRONTEND_URL": "https://mrqn-labs.com",
          "SANCTUM_STATEFUL_DOMAINS": "mrqn-labs.com,api.mrqn-labs.com",
          "MYSQL_ATTR_SSL_CA": "/etc/pki/tls/certs/ca-bundle.crt"
        },
        "versionFunctions": true,
        "deploymentMethod": "direct",
        "remoteFunctionData": {
          "Configuration": {
            "FunctionName": "laravel-api-budget-production-api",
            "FunctionArn": "arn:aws:lambda:us-east-1:905418356464:function:laravel-api-budget-production-api",
            "Runtime": "provided.al2",
            "Role": "arn:aws:iam::905418356464:role/laravel-api-budget-production-us-east-1-lambdaRole",
            "Handler": "public/index.php",
            "CodeSize": 40597487,
            "Description": "Laravel API Budget",
            "Timeout": 28,
            "MemorySize": 1024,
            "LastModified": "2025-11-21T03:12:50.000+0000",
            "CodeSha256": "FG05Dr2t6KMqb1XIGmWwIlWE4KF44RqL9pKmrM+RObU=",
            "Version": "$LATEST",
            "VpcConfig": {
              "SubnetIds": [],
              "SecurityGroupIds": [],
              "VpcId": "",
              "Ipv6AllowedForDualStack": false
            },
            "Environment": {
              "Variables": {
                "APP_ENV": "local",
                "DB_PORT": "4000",
                "APP_KEY": "base64:c26n7p7lFdoCgX3D8BKXkRQEI+V3IbwekVtnPUinym8=",
                "DB_HOST": "gateway01.us-east-1.prod.aws.tidbcloud.com",
                "FRONTEND_URL": "https://mrqn-labs.com",
                "SESSION_DRIVER": "cookie",
                "DB_USERNAME": "2JtT8tak5dQKC9U.root",
                "SESSION_DOMAIN": ".mrqn-labs.com",
                "MYSQL_ATTR_SSL_CA": "/etc/pki/tls/certs/ca-bundle.crt",
                "DB_CONNECTION": "mysql",
                "APP_URL": "https://api.mrqn-labs.com",
                "CACHE_DRIVER": "array",
                "SANCTUM_STATEFUL_DOMAINS": "mrqn-labs.com,api.mrqn-labs.com",
                "APP_DEBUG": "true",
                "DB_DATABASE": "expense_control",
                "DB_PASSWORD": "<REDACTED>"
              }
            },
            "KMSKeyArn": null,
            "TracingConfig": {
              "Mode": "PassThrough"
            },
            "MasterArn": null,
            "RevisionId": "6f977f2e-38a5-4ee1-b0f5-a6c6a5a44987",
            "Layers": [
              {
                "Arn": "arn:aws:lambda:us-east-1:534081306603:layer:php-82-fpm:107",
                "CodeSize": 18424307,
                "SigningProfileVersionArn": null,
                "SigningJobArn": null
              }
            ],
            "State": "Active",
            "StateReason": null,
            "StateReasonCode": null,
            "LastUpdateStatus": "Successful",
            "LastUpdateStatusReason": null,
            "LastUpdateStatusReasonCode": null,
            "PackageType": "Zip",
            "SigningProfileVersionArn": null,
            "SigningJobArn": null,
            "Architectures": [
              "x86_64"
            ],
            "EphemeralStorage": {
              "Size": 512
            },
            "SnapStart": {
              "ApplyOn": "None",
              "OptimizationStatus": "Off"
            },
            "RuntimeVersionConfig": {
              "RuntimeVersionArn": "arn:aws:lambda:us-east-1::runtime:a101a4b800d45dd33c864b6be59974128f5a99d4f7cd1bab0f0d46d98e203c7f"
            },
            "LoggingConfig": {
              "LogFormat": "Text",
              "ApplicationLogLevel": null,
              "SystemLogLevel": null,
              "LogGroup": "/aws/lambda/laravel-api-budget-production-api"
            }
          },
          "Code": {
            "RepositoryType": "S3",
            "Location": "https://prod-04-2014-tasks.s3.us-east-1.amazonaws.com/snapshots/905418356464/laravel-api-budget-production-api-e38f030a-b13a-40ce-9375-2a3cf3636ff4?versionId=1KzNA2r1SebP48kdEN7TzNIJl7JIHezl&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEDoaCXVzLWVhc3QtMSJHMEUCIQDZtE9ZvSZPQx7O2ksJPSRjMUPdO3y8HKba%2BoDa2MS6vgIgIOrS4%2BkkVsu%2BpTV1%2BFqXn8aDhYNaPNxmKov8vtK1opMqiwIIAxAAGgw3NDk2Nzg5MDI4MzkiDMSD7v445CdJX8RdFSroAVCZijdCJX7Ssv1NTSHKAxD8JEEk%2BWAv6ssI2ubnnelDs9WeY6ToBp4Cb7vPpGxs3wgWQ9G6TEL9gDMiCpLfPUVHgmWVbEG9qsIiobE5lVpoTCmqnqj1EYyDgfgRVVmEzEImwv5jM%2Bn%2BBihNOafp9gRCYwiD2iRUhdooBNjOaC0egS%2FoY3hv%2FAKPrsTpV47B9pIJek8A2eK1UVi8PTrynNS9QS4USpP8gccFCJFjLDQ9kYvEtyLXIY6s9Rqc3o7TWzH2OZwzaaEM7RlGVlF61Lp27T7d6Cxjfo9ebjhY3LqBrYgZFJL1ahwwvID%2FyAY6jQEO%2FSrjEKbK3EOpeQcFy8ylQKqawGQiYywfS%2F1LjwH5Yf2Krf8pbS9C1fk7Guzqr2aChefzGToXj%2F6gnEupe6Fzrfi8gGg8f0fo1WtBNeM2zDiAjpQlM7MZfX77BqbjL60uvG%2F01TmZawvenujpBb%2F5AaA3FxiVtU3k7cpRf0hbO2dWvwHYow%2B%2BpHsbwsw%3D&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20251121T031656Z&X-Amz-SignedHeaders=host&X-Amz-Expires=600&X-Amz-Credential=ASIA25DCYHY3767D2GNV%2F20251121%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=6d5240c4a883a1d18c4310aca7f54ebb1414636d17b4cc59e963c034b8a57788",
            "ImageUri": null,
            "ResolvedImageUri": null
          },
          "Tags": {
            "aws:cloudformation:stack-name": "laravel-api-budget-production",
            "aws:cloudformation:stack-id": "arn:aws:cloudformation:us-east-1:905418356464:stack/laravel-api-budget-production/19b75ce0-c661-11f0-b139-0e62eee933df",
            "STAGE": "production",
            "aws:cloudformation:logical-id": "ApiLambdaFunction"
          }
        }
      },
      "plugins": [
        "./vendor/bref/bref",
        "serverless-domain-manager"
      ],
      "custom": {
        "customDomain": {
          "domainName": "api.mrqn-labs.com",
          "basePath": "",
          "stage": "production",
          "createRoute53Record": true,
          "apiType": "http",
          "certificateName": "mrqn-labs.com",
          "endpointType": "regional"
        }
      },
      "functions": {
        "api": {
          "handler": "public/index.php",
          "description": "Laravel API Budget",
          "timeout": 28,
          "layers": [
            "arn:aws:lambda:us-east-1:534081306603:layer:php-82-fpm:107"
          ],
          "events": [
            {
              "httpApi": "*"
            }
          ],
          "name": "laravel-api-budget-production-api"
        }
      },
      "package": {
        "exclude": [
          "node_modules/**",
          "public/storage",
          "resources/assets/**",
          "storage/**",
          "tests/**",
          ".env"
        ],
        "artifactsS3KeyDirname": "serverless/laravel-api-budget/production/code-artifacts"
      }
    },
    "provider": {
      "name": "aws",
      "region": "us-east-1",
      "runtime": "provided.al2",
      "stage": "production",
      "memorySize": 1024,
      "environment": {
        "APP_URL": "https://api.mrqn-labs.com",
        "APP_ENV": "local",
        "APP_DEBUG": "true",
        "APP_KEY": "base64:c26n7p7lFdoCgX3D8BKXkRQEI+V3IbwekVtnPUinym8=",
        "DB_CONNECTION": "mysql",
        "DB_HOST": "gateway01.us-east-1.prod.aws.tidbcloud.com",
        "DB_PORT": "4000",
        "DB_DATABASE": "expense_control",
        "DB_USERNAME": "2JtT8tak5dQKC9U.root",
        "DB_PASSWORD": "<REDACTED>",
        "SESSION_DRIVER": "cookie",
        "CACHE_DRIVER": "array",
        "SESSION_DOMAIN": ".mrqn-labs.com",
        "FRONTEND_URL": "https://mrqn-labs.com",
        "SANCTUM_STATEFUL_DOMAINS": "mrqn-labs.com,api.mrqn-labs.com",
        "MYSQL_ATTR_SSL_CA": "/etc/pki/tls/certs/ca-bundle.crt"
      },
      "versionFunctions": true,
      "deploymentMethod": "direct",
      "remoteFunctionData": {
        "Configuration": {
          "FunctionName": "laravel-api-budget-production-api",
          "FunctionArn": "arn:aws:lambda:us-east-1:905418356464:function:laravel-api-budget-production-api",
          "Runtime": "provided.al2",
          "Role": "arn:aws:iam::905418356464:role/laravel-api-budget-production-us-east-1-lambdaRole",
          "Handler": "public/index.php",
          "CodeSize": 40597487,
          "Description": "Laravel API Budget",
          "Timeout": 28,
          "MemorySize": 1024,
          "LastModified": "2025-11-21T03:12:50.000+0000",
          "CodeSha256": "FG05Dr2t6KMqb1XIGmWwIlWE4KF44RqL9pKmrM+RObU=",
          "Version": "$LATEST",
          "VpcConfig": {
            "SubnetIds": [],
            "SecurityGroupIds": [],
            "VpcId": "",
            "Ipv6AllowedForDualStack": false
          },
          "Environment": {
            "Variables": {
              "APP_ENV": "local",
              "DB_PORT": "4000",
              "APP_KEY": "base64:c26n7p7lFdoCgX3D8BKXkRQEI+V3IbwekVtnPUinym8=",
              "DB_HOST": "gateway01.us-east-1.prod.aws.tidbcloud.com",
              "FRONTEND_URL": "https://mrqn-labs.com",
              "SESSION_DRIVER": "cookie",
              "DB_USERNAME": "2JtT8tak5dQKC9U.root",
              "SESSION_DOMAIN": ".mrqn-labs.com",
              "MYSQL_ATTR_SSL_CA": "/etc/pki/tls/certs/ca-bundle.crt",
              "DB_CONNECTION": "mysql",
              "APP_URL": "https://api.mrqn-labs.com",
              "CACHE_DRIVER": "array",
              "SANCTUM_STATEFUL_DOMAINS": "mrqn-labs.com,api.mrqn-labs.com",
              "APP_DEBUG": "true",
              "DB_DATABASE": "expense_control",
              "DB_PASSWORD": "<REDACTED>"
            }
          },
          "KMSKeyArn": null,
          "TracingConfig": {
            "Mode": "PassThrough"
          },
          "MasterArn": null,
          "RevisionId": "6f977f2e-38a5-4ee1-b0f5-a6c6a5a44987",
          "Layers": [
            {
              "Arn": "arn:aws:lambda:us-east-1:534081306603:layer:php-82-fpm:107",
              "CodeSize": 18424307,
              "SigningProfileVersionArn": null,
              "SigningJobArn": null
            }
          ],
          "State": "Active",
          "StateReason": null,
          "StateReasonCode": null,
          "LastUpdateStatus": "Successful",
          "LastUpdateStatusReason": null,
          "LastUpdateStatusReasonCode": null,
          "PackageType": "Zip",
          "SigningProfileVersionArn": null,
          "SigningJobArn": null,
          "Architectures": [
            "x86_64"
          ],
          "EphemeralStorage": {
            "Size": 512
          },
          "SnapStart": {
            "ApplyOn": "None",
            "OptimizationStatus": "Off"
          },
          "RuntimeVersionConfig": {
            "RuntimeVersionArn": "arn:aws:lambda:us-east-1::runtime:a101a4b800d45dd33c864b6be59974128f5a99d4f7cd1bab0f0d46d98e203c7f"
          },
          "LoggingConfig": {
            "LogFormat": "Text",
            "ApplicationLogLevel": null,
            "SystemLogLevel": null,
            "LogGroup": "/aws/lambda/laravel-api-budget-production-api"
          }
        },
        "Code": {
          "RepositoryType": "S3",
          "Location": "https://prod-04-2014-tasks.s3.us-east-1.amazonaws.com/snapshots/905418356464/laravel-api-budget-production-api-e38f030a-b13a-40ce-9375-2a3cf3636ff4?versionId=1KzNA2r1SebP48kdEN7TzNIJl7JIHezl&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEDoaCXVzLWVhc3QtMSJHMEUCIQDZtE9ZvSZPQx7O2ksJPSRjMUPdO3y8HKba%2BoDa2MS6vgIgIOrS4%2BkkVsu%2BpTV1%2BFqXn8aDhYNaPNxmKov8vtK1opMqiwIIAxAAGgw3NDk2Nzg5MDI4MzkiDMSD7v445CdJX8RdFSroAVCZijdCJX7Ssv1NTSHKAxD8JEEk%2BWAv6ssI2ubnnelDs9WeY6ToBp4Cb7vPpGxs3wgWQ9G6TEL9gDMiCpLfPUVHgmWVbEG9qsIiobE5lVpoTCmqnqj1EYyDgfgRVVmEzEImwv5jM%2Bn%2BBihNOafp9gRCYwiD2iRUhdooBNjOaC0egS%2FoY3hv%2FAKPrsTpV47B9pIJek8A2eK1UVi8PTrynNS9QS4USpP8gccFCJFjLDQ9kYvEtyLXIY6s9Rqc3o7TWzH2OZwzaaEM7RlGVlF61Lp27T7d6Cxjfo9ebjhY3LqBrYgZFJL1ahwwvID%2FyAY6jQEO%2FSrjEKbK3EOpeQcFy8ylQKqawGQiYywfS%2F1LjwH5Yf2Krf8pbS9C1fk7Guzqr2aChefzGToXj%2F6gnEupe6Fzrfi8gGg8f0fo1WtBNeM2zDiAjpQlM7MZfX77BqbjL60uvG%2F01TmZawvenujpBb%2F5AaA3FxiVtU3k7cpRf0hbO2dWvwHYow%2B%2BpHsbwsw%3D&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20251121T031656Z&X-Amz-SignedHeaders=host&X-Amz-Expires=600&X-Amz-Credential=ASIA25DCYHY3767D2GNV%2F20251121%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=6d5240c4a883a1d18c4310aca7f54ebb1414636d17b4cc59e963c034b8a57788",
          "ImageUri": null,
          "ResolvedImageUri": null
        },
        "Tags": {
          "aws:cloudformation:stack-name": "laravel-api-budget-production",
          "aws:cloudformation:stack-id": "arn:aws:cloudformation:us-east-1:905418356464:stack/laravel-api-budget-production/19b75ce0-c661-11f0-b139-0e62eee933df",
          "STAGE": "production",
          "aws:cloudformation:logical-id": "ApiLambdaFunction"
        }
      }
    },
    "dashboard": {
      "isEnabledForService": false,
      "requiredAuthentication": false,
      "orgFeaturesInUse": null,
      "orgObservabilityIntegrations": null,
      "serviceAppId": null,
      "serviceProvider": null,
      "instanceParameters": null
    },
    "serviceRawFile": "service: laravel-api-budget\n\nprovider:\n  name: aws\n  region: us-east-1\n  runtime: provided.al2\n  stage: production\n  memorySize: 1024\n  environment:\n    APP_URL: https://api.mrqn-labs.com\n    APP_ENV: local\n    APP_DEBUG: true\n    APP_KEY: ${ssm:/app-budget/APP_KEY}\n    DB_CONNECTION: mysql\n    DB_HOST: ${ssm:/app-budget/DB_HOST}\n\n    # 4000 es correcto si usas PlanetScale. Si usas RDS normal es 3306.\n    DB_PORT: 4000\n\n    DB_DATABASE: ${ssm:/app-budget/DB_DATABASE}\n    DB_USERNAME: ${ssm:/app-budget/DB_USERNAME}\n\n    # CORREGIDO: Se agreg√≥ la referencia a SSM\n    DB_PASSWORD: ${ssm:/app-budget/DB_PASSWORD}\n\n    SESSION_DRIVER: cookie\n    CACHE_DRIVER: array\n    SESSION_DOMAIN: .mrqn-labs.com\n    FRONTEND_URL: https://mrqn-labs.com\n    SANCTUM_STATEFUL_DOMAINS: mrqn-labs.com,api.mrqn-labs.com\n    MYSQL_ATTR_SSL_CA: /etc/pki/tls/certs/ca-bundle.crt\n\nplugins:\n  - ./vendor/bref/bref\n  - serverless-domain-manager\n\ncustom:\n  customDomain:\n    domainName: api.mrqn-labs.com\n    basePath: ''\n    stage: ${self:provider.stage}\n    createRoute53Record: true\n    apiType: http                   # Esto indica API Gateway v2 (HTTP API)\n    certificateName: mrqn-labs.com\n    endpointType: regional\n\nfunctions:\n  api:\n    handler: public/index.php\n    description: 'Laravel API Budget'\n    timeout: 28\n    layers:\n      - ${bref:layer.php-82-fpm}\n    events:\n      # CORREGIDO: Usamos httpApi para coincidir con apiType: http\n      - httpApi: '*'\n\npackage:\n  exclude:\n    - node_modules/**\n    - public/storage\n    - resources/assets/**\n    - storage/**\n    - tests/**\n    - .env\n",
    "command": [
      "deploy",
      "function"
    ],
    "options": {
      "function": "api"
    },
    "orgId": "00c96431-09c2-490a-bb47-b89898807bda",
    "orgName": "mrqnlabs",
    "userId": "fGq2CPmCsttdsTVwgj",
    "userName": "mrqnlabs",
    "serviceProviderAwsAccountId": "905418356464",
    "serviceProviderAwsCfStackName": "laravel-api-budget-production",
    "serviceProviderAwsCfStackId": "arn:aws:cloudformation:us-east-1:905418356464:stack/laravel-api-budget-production/19b75ce0-c661-11f0-b139-0e62eee933df",
    "serviceProviderAwsCfStackCreated": "2025-11-20T22:34:39.469Z",
    "serviceProviderAwsCfStackUpdated": "2025-11-21T03:12:36.973Z",
    "serviceProviderAwsCfStackStatus": "UPDATE_COMPLETE",
    "serviceProviderAwsCfStackOutputs": [
      {
        "OutputKey": "DomainNameHttp",
        "OutputValue": "api.mrqn-labs.com",
        "ExportName": "sls-laravel-api-budget-production-DomainNameHttp"
      },
      {
        "OutputKey": "HostedZoneIdHttp",
        "OutputValue": "Z1UJRXOUMOOFQ8",
        "ExportName": "sls-laravel-api-budget-production-HostedZoneIdHttp"
      },
      {
        "OutputKey": "ApiLambdaFunctionQualifiedArn",
        "OutputValue": "arn:aws:lambda:us-east-1:905418356464:function:laravel-api-budget-production-api:5",
        "Description": "Current Lambda function version",
        "ExportName": "sls-laravel-api-budget-production-ApiLambdaFunctionQualifiedArn"
      },
      {
        "OutputKey": "HttpApiId",
        "OutputValue": "qlyl6b0kyd",
        "Description": "Id of the HTTP API",
        "ExportName": "sls-laravel-api-budget-production-HttpApiId"
      },
      {
        "OutputKey": "DistributionDomainNameHttp",
        "OutputValue": "d-cixm6e81ff.execute-api.us-east-1.amazonaws.com",
        "ExportName": "sls-laravel-api-budget-production-DistributionDomainNameHttp"
      },
      {
        "OutputKey": "ServerlessDeploymentBucketName",
        "OutputValue": "laravel-api-budget-produc-serverlessdeploymentbuck-8jl0bvfyjsjq",
        "ExportName": "sls-laravel-api-budget-production-ServerlessDeploymentBucketName"
      },
      {
        "OutputKey": "HttpApiUrl",
        "OutputValue": "https://qlyl6b0kyd.execute-api.us-east-1.amazonaws.com",
        "Description": "URL of the HTTP API",
        "ExportName": "sls-laravel-api-budget-production-HttpApiUrl"
      }
    ]
  }
}